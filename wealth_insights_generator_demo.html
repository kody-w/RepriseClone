<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>M365 Copilot - Universal Agent Template</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", -apple-system, BlinkMacSystemFont, system-ui,
          sans-serif;
        background: #faf9f8;
        height: 100vh;
        display: flex;
        overflow: hidden;
        color: #323130;
      }

      /* Sidebar */
      .sidebar {
        width: 260px;
        background: #ffffff;
        display: flex;
        flex-direction: column;
        border-right: 1px solid #edebe9;
      }

      /* Sidebar Header */
      .sidebar-header {
        padding: 12px 16px;
        display: flex;
        align-items: center;
        gap: 10px;
        border-bottom: 1px solid #edebe9;
        height: 48px;
      }

      .copilot-icon {
        width: 24px;
        height: 24px;
        background: linear-gradient(
          135deg,
          #b4a0ff 0%,
          #ff7eb9 50%,
          #7ee7fc 100%
        );
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
      }

      .copilot-icon::before {
        content: "";
        position: absolute;
        width: 12px;
        height: 12px;
        background: white;
        border-radius: 2px;
        opacity: 0.9;
      }

      .sidebar-title {
        font-size: 14px;
        font-weight: 600;
        color: #323130;
      }

      .sidebar-button {
        margin-left: auto;
        background: none;
        border: none;
        padding: 4px;
        cursor: pointer;
        color: #605e5c;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
        width: 32px;
        height: 32px;
      }

      .sidebar-button:hover {
        background: #f3f2f1;
      }

      /* Search Box */
      .search-container {
        padding: 8px 16px;
        border-bottom: 1px solid #edebe9;
      }

      .search-box {
        position: relative;
        width: 100%;
      }

      .search-icon {
        position: absolute;
        left: 8px;
        top: 50%;
        transform: translateY(-50%);
        color: #605e5c;
        font-size: 14px;
      }

      .search-input {
        width: 100%;
        padding: 6px 8px 6px 32px;
        border: 1px solid #d2d0ce;
        border-radius: 4px;
        font-size: 14px;
        background: #faf9f8;
        outline: none;
        transition: all 0.2s;
      }

      .search-input:focus {
        border-color: #605e5c;
        background: #ffffff;
      }

      /* Navigation */
      .nav-section {
        flex: 1;
        overflow-y: auto;
        padding: 4px 0;
      }

      .nav-item {
        padding: 8px 16px;
        display: flex;
        align-items: center;
        gap: 12px;
        cursor: pointer;
        font-size: 14px;
        color: #323130;
        transition: background 0.1s;
        position: relative;
        user-select: none;
      }

      .nav-item:hover {
        background: #f3f2f1;
      }

      .nav-item.active {
        background: #f3f2f1;
      }

      .nav-item.active::before {
        content: "";
        position: absolute;
        left: 0;
        top: 8px;
        bottom: 8px;
        width: 2px;
        background: #742774;
        border-radius: 1px;
      }

      .nav-icon {
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }

      /* Demo Controls Section */
      .demo-controls-section {
        border-top: 1px solid #edebe9;
        padding: 12px 16px;
        background: #faf9f8;
      }

      .demo-controls-title {
        font-size: 12px;
        font-weight: 600;
        color: #605e5c;
        margin-bottom: 8px;
      }

      .demo-controls {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 8px;
      }

      .demo-btn {
        padding: 6px 12px;
        border: 1px solid #d2d0ce;
        border-radius: 4px;
        background: white;
        font-size: 12px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 4px;
        color: #323130;
        transition: all 0.2s;
      }

      .demo-btn:hover:not(:disabled) {
        background: #f3f2f1;
        border-color: #605e5c;
      }

      .demo-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .demo-btn.primary {
        background: #742774;
        color: white;
        border-color: #742774;
      }

      .demo-btn.primary:hover:not(:disabled) {
        background: #5a1d5a;
      }

      /* Settings Panel */
      .settings-panel {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 600px;
        max-width: 90vw;
        max-height: 80vh;
        background: white;
        border-radius: 8px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
        z-index: 1000;
        display: none;
        flex-direction: column;
      }

      .settings-panel.visible {
        display: flex;
      }

      .settings-header {
        padding: 16px 20px;
        border-bottom: 1px solid #edebe9;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .settings-title {
        font-size: 16px;
        font-weight: 600;
        color: #323130;
      }

      .close-settings {
        background: none;
        border: none;
        font-size: 20px;
        cursor: pointer;
        color: #605e5c;
        padding: 0;
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
      }

      .close-settings:hover {
        background: #f3f2f1;
      }

      .settings-content {
        flex: 1;
        overflow-y: auto;
        padding: 20px;
      }

      .preset-section {
        margin-bottom: 20px;
      }

      .preset-title {
        font-size: 14px;
        font-weight: 600;
        color: #323130;
        margin-bottom: 10px;
      }

      .preset-buttons {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .preset-btn {
        padding: 6px 12px;
        background: white;
        border: 1px solid #d2d0ce;
        border-radius: 4px;
        font-size: 12px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .preset-btn:hover {
        background: #f3f2f1;
        border-color: #742774;
      }

      .json-section {
        margin-top: 20px;
      }

      .json-title {
        font-size: 14px;
        font-weight: 600;
        color: #323130;
        margin-bottom: 10px;
      }

      .json-textarea {
        width: 100%;
        height: 300px;
        padding: 12px;
        border: 1px solid #d2d0ce;
        border-radius: 4px;
        font-family: "Consolas", "Monaco", monospace;
        font-size: 12px;
        resize: vertical;
        background: #faf9f8;
      }

      .json-textarea:focus {
        outline: none;
        border-color: #742774;
        background: white;
      }

      .json-actions {
        display: flex;
        gap: 8px;
        margin-top: 12px;
      }

      .json-btn {
        padding: 8px 16px;
        background: #742774;
        color: white;
        border: none;
        border-radius: 4px;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .json-btn:hover {
        background: #5a1d5a;
      }

      .json-btn.secondary {
        background: white;
        color: #323130;
        border: 1px solid #d2d0ce;
      }

      .json-btn.secondary:hover {
        background: #f3f2f1;
      }

      .settings-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.3);
        z-index: 999;
        display: none;
      }

      .settings-overlay.visible {
        display: block;
      }

      /* Bottom section */
      .sidebar-bottom {
        border-top: 1px solid #edebe9;
        padding: 8px 0;
      }

      .user-section {
        padding: 8px 16px;
        display: flex;
        align-items: center;
        gap: 12px;
        cursor: pointer;
        transition: background 0.1s;
      }

      .user-section:hover {
        background: #f3f2f1;
      }

      .user-avatar {
        width: 28px;
        height: 28px;
        border-radius: 50%;
        background: #742774;
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: 600;
      }

      /* Main Content */
      .main-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        background: #faf9f8;
      }

      /* Header */
      .content-header {
        height: 48px;
        padding: 0 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: #ffffff;
        border-bottom: 1px solid #edebe9;
      }

      .header-title {
        font-size: 14px;
        color: #605e5c;
      }

      .header-actions {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .status-indicator {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 6px 12px;
        background: #f3f2f1;
        border-radius: 4px;
        font-size: 12px;
        color: #605e5c;
      }

      .status-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: #10b981;
      }

      .status-dot.processing {
        background: #f59e0b;
        animation: pulse 1s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      /* Chat Container */
      .chat-container {
        flex: 1;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      /* Chat Messages */
      .chat-messages {
        flex: 1;
        overflow-y: auto;
        padding: 20px;
        display: block;
      }

      .message {
        max-width: 900px;
        margin: 0 auto 24px;
      }

      .message-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 8px;
      }

      .message-avatar-user {
        width: 28px;
        height: 28px;
        border-radius: 50%;
        background: #00a651;
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: 600;
      }

      .message-avatar-agent {
        width: 28px;
        height: 28px;
        border-radius: 6px;
        background: linear-gradient(135deg, #742774 0%, #00a651 100%);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        font-weight: 600;
      }

      .message-author {
        font-size: 14px;
        font-weight: 600;
        color: #323130;
      }

      .message-tag {
        padding: 2px 8px;
        background: #f3f2f1;
        border-radius: 4px;
        font-size: 12px;
        color: #605e5c;
      }

      .message-time {
        font-size: 12px;
        color: #a19f9d;
      }

      .message-content {
        margin-left: 40px;
        font-size: 14px;
        line-height: 1.6;
        color: #323130;
      }

      /* Agent Cards */
      .agent-card {
        margin-left: 40px;
        margin-top: 16px;
        background: white;
        border: 1px solid #edebe9;
        border-radius: 8px;
        overflow: hidden;
      }

      .agent-card-header {
        padding: 16px;
        display: flex;
        align-items: center;
        gap: 12px;
        border-bottom: 1px solid #edebe9;
        background: linear-gradient(
          135deg,
          rgba(116, 39, 116, 0.05) 0%,
          rgba(0, 166, 81, 0.05) 100%
        );
      }

      .agent-card-icon {
        font-size: 20px;
      }

      .agent-card-title {
        font-size: 16px;
        font-weight: 600;
        color: #323130;
      }

      .agent-card-status {
        margin-left: auto;
        padding: 4px 12px;
        background: #10b981;
        color: white;
        border-radius: 12px;
        font-size: 12px;
        font-weight: 600;
      }

      .agent-card-content {
        padding: 16px;
      }

      .detail-list {
        list-style: none;
      }

      .detail-item {
        padding: 8px 0;
        font-size: 14px;
        color: #323130;
        display: flex;
        gap: 8px;
        border-bottom: 1px solid #f3f2f1;
      }

      .detail-item:last-child {
        border-bottom: none;
      }

      .detail-label {
        font-weight: 600;
        min-width: 180px;
        color: #605e5c;
      }

      .detail-value {
        color: #323130;
        flex: 1;
      }

      /* Input Container */
      .input-container {
        padding: 16px 20px;
        background: white;
        border-top: 1px solid #edebe9;
      }

      .input-wrapper {
        max-width: 900px;
        margin: 0 auto;
        position: relative;
      }

      .input-field {
        width: 100%;
        padding: 12px 48px 12px 16px;
        border: 1px solid #d2d0ce;
        border-radius: 8px;
        font-size: 14px;
        font-family: inherit;
        resize: none;
        outline: none;
        background: #faf9f8;
        transition: all 0.2s;
        min-height: 44px;
        max-height: 120px;
      }

      .input-field:focus {
        border-color: #742774;
        background: white;
      }

      .input-actions {
        position: absolute;
        right: 8px;
        bottom: 8px;
        display: flex;
        gap: 4px;
      }

      .input-button {
        width: 28px;
        height: 28px;
        border: none;
        background: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
        color: #605e5c;
        transition: all 0.1s;
      }

      .input-button:hover {
        background: #f3f2f1;
      }

      .input-button.send {
        color: #742774;
      }

      .input-button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      /* Typing indicator */
      .typing-indicator {
        margin-left: 40px;
        display: flex;
        gap: 4px;
        padding: 8px 0;
      }

      .typing-dot {
        width: 8px;
        height: 8px;
        background: #605e5c;
        border-radius: 50%;
        animation: typing 1.4s infinite;
      }

      .typing-dot:nth-child(2) {
        animation-delay: 0.2s;
      }

      .typing-dot:nth-child(3) {
        animation-delay: 0.4s;
      }

      @keyframes typing {
        0%,
        60%,
        100% {
          transform: translateY(0);
          opacity: 0.5;
        }
        30% {
          transform: translateY(-10px);
          opacity: 1;
        }
      }

      /* Welcome state - hidden when chat is active */
      .welcome-screen {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 40px;
        max-width: 1200px;
        margin: 0 auto;
        width: 100%;
      }

      .welcome-screen.hidden {
        display: none;
      }

      .welcome-title {
        font-size: 36px;
        font-weight: 600;
        color: #323130;
        margin-bottom: 16px;
        text-align: center;
      }

      .welcome-subtitle {
        font-size: 16px;
        color: #605e5c;
        margin-bottom: 48px;
        text-align: center;
      }

      .suggestion-cards {
        display: flex;
        gap: 20px;
        width: 100%;
        max-width: 900px;
      }

      .suggestion-card {
        flex: 1;
        background: white;
        border: 1px solid #edebe9;
        border-radius: 8px;
        padding: 20px;
        cursor: pointer;
        transition: all 0.2s;
        min-height: 120px;
      }

      .suggestion-card:hover {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        transform: translateY(-2px);
        border-color: #742774;
      }

      .card-icon {
        font-size: 24px;
        margin-bottom: 12px;
      }

      .card-title {
        font-size: 14px;
        font-weight: 600;
        color: #323130;
        margin-bottom: 8px;
      }

      .card-description {
        font-size: 13px;
        color: #605e5c;
        line-height: 1.4;
      }

      .badge {
        display: inline-block;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 600;
      }
      .badge.success {
        background: #d4edda;
        color: #155724;
      }
      .badge.warning {
        background: #fff3cd;
        color: #856404;
      }
      .badge.danger {
        background: #f8d7da;
        color: #721c24;
      }
      .badge.info {
        background: #d1ecf1;
        color: #0c5460;
      }
      .trend-up {
        color: #10b981;
      }
      .trend-down {
        color: #dc2626;
      }
    </style>
  </head>
  <body>
    <!-- Settings Overlay -->
    <div
      class="settings-overlay"
      id="settingsOverlay"
      onclick="closeSettings()"
    ></div>

    <!-- Settings Panel -->
    <div class="settings-panel" id="settingsPanel">
      <div class="settings-header">
        <h3 class="settings-title">Demo Configuration</h3>
        <button class="close-settings" onclick="closeSettings()">×</button>
      </div>
      <div class="settings-content">
        <div class="preset-section">
          <div class="preset-title">Load Preset Demo:</div>
          <div class="preset-buttons">
            <button
              class="preset-btn"
              onclick="loadPreset('financial-insights')"
            >
              Financial Insights
            </button>
            <button
              class="preset-btn"
              onclick="loadPreset('wealth-management')"
            >
              Wealth Management
            </button>
            <button class="preset-btn" onclick="loadPreset('tax-optimization')">
              Tax Optimization
            </button>
            <button
              class="preset-btn"
              onclick="loadPreset('retirement-planning')"
            >
              Retirement Planning
            </button>
            <button class="preset-btn" onclick="loadPreset('estate-planning')">
              Estate Planning
            </button>
          </div>
        </div>
        <div class="json-section">
          <div class="json-title">JSON Configuration:</div>
          <textarea class="json-textarea" id="jsonConfig"></textarea>
          <div class="json-actions">
            <button class="json-btn" onclick="applyConfig()">
              Apply Configuration
            </button>
            <button class="json-btn secondary" onclick="exportConfig()">
              Export to File
            </button>
            <input
              type="file"
              id="importFile"
              accept=".json"
              style="display: none"
              onchange="importConfig(event)"
            />
            <button
              class="json-btn secondary"
              onclick="document.getElementById('importFile').click()"
            >
              Import from File
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Sidebar -->
    <div class="sidebar">
      <div class="sidebar-header">
        <div class="copilot-icon"></div>
        <span class="sidebar-title">M365 Copilot</span>
        <button class="sidebar-button">☰</button>
      </div>

      <div class="search-container">
        <div class="search-box">
          <span class="search-icon">🔍</span>
          <input type="text" class="search-input" placeholder="Search" />
        </div>
      </div>

      <div class="nav-section">
        <div class="nav-item active">
          <div class="nav-icon">💬</div>
          <span>Chat</span>
        </div>
        <div class="nav-item">
          <div class="nav-icon">🤖</div>
          <span>Agents</span>
        </div>
        <div class="nav-item">
          <div class="nav-icon">💬</div>
          <span>Conversations</span>
        </div>
        <div class="nav-item">
          <div class="nav-icon">📄</div>
          <span>Pages</span>
        </div>
        <div class="nav-item">
          <div class="nav-icon">➕</div>
          <span>Create</span>
        </div>
        <div class="nav-item">
          <div class="nav-icon">📱</div>
          <span>Apps</span>
        </div>
        <div class="nav-item">
          <div class="nav-icon">⚙️</div>
          <span>Admin</span>
        </div>
      </div>

      <!-- Demo Controls -->
      <div class="demo-controls-section">
        <div class="demo-controls-title">Demo Controls</div>
        <div class="demo-controls">
          <button class="demo-btn primary" onclick="startDemo()" id="startBtn">
            ▶️ Start
          </button>
          <button class="demo-btn" onclick="pauseDemo()" id="pauseBtn" disabled>
            ⏸️ Pause
          </button>
          <button class="demo-btn" onclick="resetDemo()" id="resetBtn">
            🔄 Reset
          </button>
          <button class="demo-btn" onclick="skipToNext()" id="skipBtn" disabled>
            ⏭️ Skip
          </button>
        </div>
      </div>

      <div class="sidebar-bottom">
        <div class="user-section" onclick="openSettings()">
          <div class="user-avatar" id="userAvatar">DU</div>
          <span style="font-size: 14px" id="userRole">Demo User</span>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <div class="content-header">
        <div class="header-title" id="headerTitle">Agent Demo</div>
        <div class="header-actions">
          <div class="status-indicator">
            <span class="status-dot" id="statusDot"></span>
            <span id="statusText">Ready</span>
          </div>
        </div>
      </div>

      <div class="chat-container">
        <!-- Welcome Screen -->
        <div class="welcome-screen" id="welcomeScreen">
          <h1 class="welcome-title" id="welcomeTitle">🤖 Agent Demo</h1>
          <p class="welcome-subtitle" id="welcomeSubtitle">
            Load a demo configuration to get started
          </p>

          <div class="suggestion-cards" id="suggestionCards">
            <div class="suggestion-card" onclick="quickStart(0)">
              <div class="card-icon">📊</div>
              <div class="card-title">Option 1</div>
              <div class="card-description">Description</div>
            </div>
            <div class="suggestion-card" onclick="quickStart(1)">
              <div class="card-icon">📈</div>
              <div class="card-title">Option 2</div>
              <div class="card-description">Description</div>
            </div>
            <div class="suggestion-card" onclick="quickStart(2)">
              <div class="card-icon">🎯</div>
              <div class="card-title">Option 3</div>
              <div class="card-description">Description</div>
            </div>
          </div>
        </div>

        <!-- Chat Messages -->
        <div class="chat-messages" id="chatMessages" style="display: none">
          <!-- Messages will be dynamically added here -->
        </div>

        <!-- Input Container -->
        <div class="input-container">
          <div class="input-wrapper">
            <textarea
              class="input-field"
              id="messageInput"
              placeholder="Type your message here..."
              rows="1"
              onkeypress="handleKeyPress(event)"
              oninput="autoResize(this)"
            ></textarea>
            <div class="input-actions">
              <button class="input-button">📎</button>
              <button
                class="input-button send"
                onclick="sendCurrentMessage()"
                id="sendButton"
              >
                ➤
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Configuration object
      let config = {
        title: "Agent Demo",
        userAvatar: "DU",
        userRole: "Demo User",
        agentName: "Agent",
        agentEmoji: "🤖",
        welcomeTitle: "🤖 Agent Demo",
        welcomeSubtitle: "Load a demo configuration to get started",
        suggestionCards: [
          {
            icon: "📊",
            title: "Option 1",
            description: "Description",
            message: "Sample message 1",
          },
          {
            icon: "📈",
            title: "Option 2",
            description: "Description",
            message: "Sample message 2",
          },
          {
            icon: "🎯",
            title: "Option 3",
            description: "Description",
            message: "Sample message 3",
          },
        ],
        demoScript: [],
      };

      // Preset configurations
      const presets = {
        "financial-insights": {
          title: "Financial Insights Agent",
          userAvatar: "FA",
          userRole: "Financial Advisor",
          agentName: "Financial Insights",
          agentEmoji: "💹",
          welcomeTitle: "💹 Financial Insights Agent",
          welcomeSubtitle:
            "Real-Time Portfolio Intelligence & Wealth Management",
          suggestionCards: [
            {
              icon: "📊",
              title: "Portfolio Analysis",
              description: "Complete portfolio review",
              message: "Analyze portfolio performance and risk metrics",
            },
            {
              icon: "⚡",
              title: "Risk Assessment",
              description: "Stress testing & hedging",
              message: "Run stress test scenarios on current holdings",
            },
            {
              icon: "🎯",
              title: "Retirement Planning",
              description: "Timeline optimization",
              message: "Create retirement planning timeline",
            },
          ],
          demoScript: [
            {
              type: "user",
              content:
                "Analyze my client James Richardson's portfolio. He's 52, planning early retirement at 58. Current net worth $4.2M, but worried about market volatility. Need full risk analysis and optimization strategy.",
              delay: 1000,
            },
            {
              type: "agent",
              content:
                "Analyzing James Richardson's $4.2M portfolio with focus on early retirement readiness, risk assessment, and market volatility protection.",
              agentData: {
                title: "Portfolio Analysis Complete",
                status: "Active",
                details: {
                  "Current Age": "52 years",
                  "Target Retirement": "58 years (6 years)",
                  "Net Worth": "$4,247,800",
                  "Annual Income": "$385,000",
                  "Portfolio Beta": "1.18 (High correlation)",
                  "Sharpe Ratio": "1.34 (Good)",
                  "Volatility Protection":
                    "<span class='badge danger'>34% - Inadequate</span>",
                },
              },
              typingTime: 2000,
              delay: 2000,
            },
          ],
        },
        "wealth-management": {
          title: "Wealth Insights Generator",
          userAvatar: "FS",
          userRole: "Financial Services Rep",
          agentName: "Wealth Insights",
          agentEmoji: "💎",
          welcomeTitle: "💎 Wealth Insights Generator",
          welcomeSubtitle:
            "Consolidate customer assets and generate proactive financial wellness reports",
          suggestionCards: [
            {
              icon: "📊",
              title: "Asset Consolidation",
              description: "View all customer holdings",
              message:
                "Consolidate all assets for the Henderson family across accounts and institutions",
            },
            {
              icon: "📝",
              title: "Wellness Report",
              description: "Personalized recommendations",
              message:
                "Generate a proactive financial wellness report with personalized recommendations",
            },
            {
              icon: "🎯",
              title: "Product Opportunities",
              description: "Cross-sell suggestions",
              message:
                "Identify upsell and cross-sell opportunities based on customer portfolio",
            },
          ],
          demoScript: [
            {
              type: "user",
              content:
                "Consolidate all assets for the Henderson family and generate a proactive financial wellness report with personalized product recommendations.",
              delay: 1000,
            },
            {
              type: "agent",
              content:
                "Consolidating customer assets across all accounts and institutions. Generating proactive financial wellness report with personalized engagement opportunities.",
              agentData: {
                title: "Financial Wellness Report",
                status: "Complete",
                details: {
                  "Total Consolidated Assets": "$3,247,800",
                  "Accounts Found": "7 accounts across 4 institutions",
                  "Asset Visibility":
                    "Complete natural language summary generated",
                  "Holdings Summary":
                    "60% Equities, 25% Bonds, 10% Real Estate, 5% Cash",
                  "Wellness Score": "82/100 - Strong position",
                  "Key Insight": "Overconcentration in tech sector (35%)",
                  "Personalized Recommendation":
                    "Diversify with international equity fund",
                  "Cross-Sell Opportunity":
                    "High-yield savings account for cash reserves",
                  "Upsell Opportunity":
                    "Premium wealth management tier eligible",
                },
              },
              typingTime: 2000,
              delay: 2000,
            },
            {
              type: "user",
              content:
                "What specific financial products should I recommend to increase their holdings and provide better portfolio balance?",
              delay: 1500,
            },
            {
              type: "agent",
              content:
                "Analyzing portfolio gaps and generating targeted product recommendations to increase client holdings and improve portfolio balance.",
              agentData: {
                title: "Targeted Product Recommendations",
                status: "Personalized for Henderson Family",
                details: {
                  "Primary Recommendation":
                    "International Growth Fund - Fill 15% allocation gap",
                  "Expected New Investment": "$450,000 based on risk profile",
                  "Municipal Bond Ladder":
                    "Tax-advantaged income, $200K suggested",
                  "Premium Savings Account":
                    "3.5% APY for $150K emergency fund",
                  "Life Insurance Gap": "$2M term life policy recommended",
                  "Estate Planning Services":
                    "Trust services for assets over $3M",
                  "Projected Revenue Impact": "+$28,500 annual fees",
                  "Client Benefit":
                    "Reduce risk by 22%, increase returns by 1.3%",
                  "Next Best Action":
                    "Schedule wellness review meeting this week",
                },
              },
              typingTime: 2500,
              delay: 2000,
            },
            {
              type: "user",
              content:
                "Generate natural language summaries I can use to explain these recommendations in simple terms to the client.",
              delay: 1500,
            },
            {
              type: "agent",
              content:
                "Creating clear, natural language summaries to facilitate personalized customer engagement and improve understanding of recommendations.",
              agentData: {
                title: "Client Communication Summaries",
                status: "Ready to Share",
                details: {
                  "Portfolio Summary":
                    "Your $3.2M is doing well but concentrated in US tech stocks",
                  "Main Opportunity":
                    "Adding international stocks could boost returns and lower risk",
                  "Simple Explanation":
                    "Like not putting all eggs in one basket",
                  "Savings Account Benefit":
                    "Your cash could earn $5,250 more per year",
                  "Insurance Explanation":
                    "Protect your family's lifestyle if something happens",
                  "Investment Rationale":
                    "Similar families earned 1.3% more with this mix",
                  "Risk Reduction": "Market drops would impact you 22% less",
                  "Action Step":
                    "Let's meet this week to review these opportunities",
                  "Expected Outcome":
                    "Better protected wealth growing more consistently",
                },
              },
              typingTime: 2500,
              delay: 2000,
            },
            {
              type: "user",
              content:
                "How will implementing these recommendations help me meet my C-Suite goals for scaling new product offerings and increasing client investment?",
              delay: 1500,
            },
            {
              type: "agent",
              content:
                "Analyzing impact on organizational C-Suite objectives for scaling financial products and increasing client investment levels.",
              agentData: {
                title: "C-Suite Impact Analysis",
                status: "Strategic Alignment",
                details: {
                  "Client Investment Increase":
                    "$800K new assets from Henderson family",
                  "Product Adoption":
                    "3 new products per client (from 1.2 average)",
                  "Revenue Growth": "+$28,500 annual from single client",
                  Scalability: "Automated reports reduce advisor time by 65%",
                  "Client Satisfaction":
                    "NPS increase from 42 to 67 with personalization",
                  "Market Penetration": "Cross-sell rate improved 3.5x",
                  "Competitive Advantage":
                    "Proactive recommendations vs reactive service",
                  "Portfolio Expansion":
                    "Average client holdings +$650K within 6 months",
                  "ROI on Technology":
                    "312% return on Wealth Insights investment",
                  "Strategic Goal":
                    "Path to $50M new AUM from existing clients",
                },
              },
              typingTime: 3000,
              delay: 2000,
            },
          ],
        },
        "tax-optimization": {
          title: "Tax Strategy Optimizer",
          userAvatar: "TA",
          userRole: "Tax Advisor",
          agentName: "Tax Optimizer",
          agentEmoji: "📋",
          welcomeTitle: "📋 Tax Strategy Optimizer",
          welcomeSubtitle: "Maximize tax efficiency and savings",
          suggestionCards: [
            {
              icon: "💵",
              title: "Tax Loss Harvesting",
              description: "Identify opportunities",
              message: "Analyze tax loss harvesting opportunities",
            },
            {
              icon: "🏦",
              title: "Deduction Analysis",
              description: "Maximize deductions",
              message: "Review available deductions and credits",
            },
            {
              icon: "📊",
              title: "Year-End Planning",
              description: "Strategic moves",
              message: "Create year-end tax planning strategy",
            },
          ],
          demoScript: [
            {
              type: "user",
              content:
                "What tax optimization strategies should we implement before year-end?",
              delay: 1000,
            },
            {
              type: "agent",
              content:
                "Analyzing tax optimization opportunities for maximum year-end savings.",
              agentData: {
                title: "Tax Optimization Plan",
                status: "Priority Actions",
                details: {
                  "Tax Loss Harvesting":
                    "Sell underperforming stocks - Save $18,900",
                  "Max 401(k)": "$46K remaining - Save $17,020",
                  "Charitable Giving":
                    "Donate appreciated stock - Save $37,000",
                  "Total Savings": "$72,920",
                },
              },
              typingTime: 2000,
              delay: 2000,
            },
          ],
        },
        "retirement-planning": {
          title: "Retirement Planning Advisor",
          userAvatar: "RP",
          userRole: "Retirement Planner",
          agentName: "Retirement Advisor",
          agentEmoji: "🏖️",
          welcomeTitle: "🏖️ Retirement Planning Advisor",
          welcomeSubtitle: "Design your path to retirement",
          suggestionCards: [
            {
              icon: "📅",
              title: "Retirement Timeline",
              description: "Calculate target date",
              message: "Calculate my retirement timeline",
            },
            {
              icon: "💰",
              title: "Income Planning",
              description: "Monthly projections",
              message: "Project retirement income needs",
            },
            {
              icon: "🛡️",
              title: "Risk Protection",
              description: "Insurance needs",
              message: "Assess insurance and protection needs",
            },
          ],
          demoScript: [
            {
              type: "user",
              content:
                "Create a 10-year retirement roadmap showing cash flow projections.",
              delay: 1000,
            },
            {
              type: "agent",
              content:
                "Building comprehensive 10-year retirement roadmap with detailed projections.",
              agentData: {
                title: "Retirement Roadmap",
                status: "Projection Complete",
                details: {
                  "Retirement Age": "65 (7 years)",
                  "Annual Need": "$180,000",
                  "Success Rate": "94% Monte Carlo",
                  "Portfolio at Retirement": "$5.2M projected",
                },
              },
              typingTime: 2000,
              delay: 2000,
            },
          ],
        },
        "estate-planning": {
          title: "Estate Planning Specialist",
          userAvatar: "EP",
          userRole: "Estate Planner",
          agentName: "Estate Planner",
          agentEmoji: "🏛️",
          welcomeTitle: "🏛️ Estate Planning Specialist",
          welcomeSubtitle: "Preserve and transfer wealth efficiently",
          suggestionCards: [
            {
              icon: "📜",
              title: "Trust Strategies",
              description: "Optimal structures",
              message: "Recommend trust structures for estate planning",
            },
            {
              icon: "🎁",
              title: "Gift Planning",
              description: "Tax-efficient giving",
              message: "Design gift and transfer strategies",
            },
            {
              icon: "🏦",
              title: "Estate Tax",
              description: "Minimize exposure",
              message: "Calculate estate tax exposure and mitigation",
            },
          ],
          demoScript: [
            {
              type: "user",
              content:
                "Design estate planning strategies to minimize taxes for next generation.",
              delay: 1000,
            },
            {
              type: "agent",
              content:
                "Creating comprehensive estate planning strategy for wealth preservation.",
              agentData: {
                title: "Estate Plan Strategy",
                status: "Ready",
                details: {
                  "Estate Value": "$12.5M",
                  "Tax Exposure": "$2.8M",
                  "Trust Strategy": "Dynasty Trust for $5M",
                  "Total Savings": "$3.8M over two generations",
                },
              },
              typingTime: 2000,
              delay: 2000,
            },
          ],
        },
      };

      // State
      let demoState = {
        isPlaying: false,
        isPaused: false,
        currentStep: 0,
        messageTimer: null,
        typingTimer: null,
      };

      let currentMessageIndex = 0;

      // Initialize
      document.addEventListener("DOMContentLoaded", function () {
        // Load default preset
        loadPreset("wealth-management");
        console.log("Universal Agent Template initialized");
      });

      // Settings functions
      function openSettings() {
        document.getElementById("settingsPanel").classList.add("visible");
        document.getElementById("settingsOverlay").classList.add("visible");
        document.getElementById("jsonConfig").value = JSON.stringify(
          config,
          null,
          2
        );
      }

      function closeSettings() {
        document.getElementById("settingsPanel").classList.remove("visible");
        document.getElementById("settingsOverlay").classList.remove("visible");
      }

      function loadPreset(presetName) {
        if (presets[presetName]) {
          config = JSON.parse(JSON.stringify(presets[presetName]));
          applyConfiguration();
          document.getElementById("jsonConfig").value = JSON.stringify(
            config,
            null,
            2
          );
        }
      }

      function applyConfig() {
        try {
          const jsonText = document.getElementById("jsonConfig").value;
          config = JSON.parse(jsonText);
          applyConfiguration();
          closeSettings();
          resetDemo();
        } catch (e) {
          alert("Invalid JSON configuration. Please check the format.");
        }
      }

      function applyConfiguration() {
        // Update UI elements
        document.getElementById("headerTitle").textContent = config.title;
        document.getElementById("userAvatar").textContent = config.userAvatar;
        document.getElementById("userRole").textContent = config.userRole;
        document.getElementById("welcomeTitle").textContent =
          config.welcomeTitle;
        document.getElementById("welcomeSubtitle").textContent =
          config.welcomeSubtitle;

        // Update suggestion cards
        const cardsContainer = document.getElementById("suggestionCards");
        cardsContainer.innerHTML = "";
        config.suggestionCards.forEach((card, index) => {
          const cardDiv = document.createElement("div");
          cardDiv.className = "suggestion-card";
          cardDiv.onclick = () => quickStart(index);
          cardDiv.innerHTML = `
                    <div class="card-icon">${card.icon}</div>
                    <div class="card-title">${card.title}</div>
                    <div class="card-description">${card.description}</div>
                `;
          cardsContainer.appendChild(cardDiv);
        });
      }

      function exportConfig() {
        const jsonText = document.getElementById("jsonConfig").value;
        const blob = new Blob([jsonText], { type: "application/json" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "agent-config.json";
        a.click();
        URL.revokeObjectURL(url);
      }

      function importConfig(event) {
        const file = event.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function (e) {
            try {
              const content = e.target.result;
              config = JSON.parse(content);
              document.getElementById("jsonConfig").value = JSON.stringify(
                config,
                null,
                2
              );
              applyConfiguration();
            } catch (error) {
              alert("Invalid JSON file. Please check the format.");
            }
          };
          reader.readAsText(file);
        }
      }

      // Auto resize textarea
      function autoResize(textarea) {
        textarea.style.height = "auto";
        textarea.style.height = Math.min(textarea.scrollHeight, 120) + "px";
      }

      // Handle key press
      function handleKeyPress(event) {
        if (event.key === "Enter" && !event.shiftKey) {
          event.preventDefault();
          sendCurrentMessage();
        }
      }

      // Quick start from cards
      function quickStart(index) {
        if (config.suggestionCards[index]) {
          const message = config.suggestionCards[index].message;
          document.getElementById("messageInput").value = message;
          sendCurrentMessage();
        }
      }

      // Send current message
      function sendCurrentMessage() {
        const input = document.getElementById("messageInput");
        const message = input.value.trim();
        if (message) {
          // Hide welcome screen and show chat
          document.getElementById("welcomeScreen").classList.add("hidden");
          document.getElementById("chatMessages").style.display = "block";

          // Add user message
          addMessage("user", message);

          input.value = "";
          autoResize(input);

          // Simulate agent response
          setTimeout(() => {
            showTypingIndicator();
            setTimeout(() => {
              hideTypingIndicator();
              addMessage(
                "agent",
                `I'll help you with that. Please use the demo controls to see a full demonstration of the ${config.title} capabilities.`
              );
            }, 1500);
          }, 500);
        }
      }

      // Demo controls
      function startDemo() {
        if (demoState.isPlaying && !demoState.isPaused) return;

        demoState.isPlaying = true;
        demoState.isPaused = false;

        document.getElementById("startBtn").disabled = true;
        document.getElementById("pauseBtn").disabled = false;
        document.getElementById("skipBtn").disabled = false;

        updateStatus("processing", "Running Demo...");

        // Hide welcome and show chat
        document.getElementById("welcomeScreen").classList.add("hidden");
        document.getElementById("chatMessages").style.display = "block";

        if (currentMessageIndex === 0) {
          document.getElementById("chatMessages").innerHTML = "";
        }

        playNextMessage();
      }

      function pauseDemo() {
        demoState.isPaused = true;
        document.getElementById("startBtn").disabled = false;
        document.getElementById("pauseBtn").disabled = true;

        clearTimeout(demoState.messageTimer);
        clearTimeout(demoState.typingTimer);

        updateStatus("idle", "Paused");
      }

      function resetDemo() {
        clearTimeout(demoState.messageTimer);
        clearTimeout(demoState.typingTimer);

        demoState.isPlaying = false;
        demoState.isPaused = false;
        currentMessageIndex = 0;

        document.getElementById("startBtn").disabled = false;
        document.getElementById("pauseBtn").disabled = true;
        document.getElementById("skipBtn").disabled = true;

        updateStatus("idle", "Ready");

        // Show welcome screen
        document.getElementById("welcomeScreen").classList.remove("hidden");
        document.getElementById("chatMessages").style.display = "none";
        document.getElementById("chatMessages").innerHTML = "";
      }

      function skipToNext() {
        clearTimeout(demoState.messageTimer);
        clearTimeout(demoState.typingTimer);
        hideTypingIndicator();

        if (currentMessageIndex < config.demoScript.length) {
          const message = config.demoScript[currentMessageIndex];
          addDemoMessage(message);
          currentMessageIndex++;

          if (currentMessageIndex < config.demoScript.length) {
            demoState.messageTimer = setTimeout(() => {
              playNextMessage();
            }, 1000);
          } else {
            completeDemo();
          }
        }
      }

      function playNextMessage() {
        if (!demoState.isPlaying || demoState.isPaused) return;

        if (currentMessageIndex >= config.demoScript.length) {
          completeDemo();
          return;
        }

        const message = config.demoScript[currentMessageIndex];

        if (message.type === "agent") {
          showTypingIndicator();
          demoState.typingTimer = setTimeout(() => {
            hideTypingIndicator();
            addDemoMessage(message);
            currentMessageIndex++;

            const delay = message.delay || 2000;
            demoState.messageTimer = setTimeout(() => {
              playNextMessage();
            }, delay);
          }, message.typingTime || 2000);
        } else {
          addDemoMessage(message);
          currentMessageIndex++;

          const delay = message.delay || 1500;
          demoState.messageTimer = setTimeout(() => {
            playNextMessage();
          }, delay);
        }
      }

      function addDemoMessage(message) {
        if (message.type === "user") {
          addMessage("user", message.content);
        } else if (message.type === "agent") {
          addMessage("agent", message.content, message.agentData);
        }
      }

      function addMessage(type, content, agentData) {
        const chatMessages = document.getElementById("chatMessages");
        const messageDiv = document.createElement("div");
        messageDiv.className = "message";

        const time = new Date().toLocaleString("en-US", {
          hour: "numeric",
          minute: "2-digit",
        });

        if (type === "user") {
          messageDiv.innerHTML = `
                    <div class="message-header">
                        <div class="message-avatar-user">${config.userAvatar}</div>
                        <span class="message-author">${config.userRole}</span>
                        <span class="message-time">${time}</span>
                    </div>
                    <div class="message-content">${content}</div>
                `;
        } else {
          let html = `
                    <div class="message-header">
                        <div class="message-avatar-agent">${config.agentEmoji}</div>
                        <span class="message-author">${config.agentName}</span>
                        <span class="message-tag">Agent</span>
                        <span class="message-time">${time}</span>
                    </div>
                    <div class="message-content">${content}</div>
                `;

          if (agentData) {
            html += `
                        <div class="agent-card">
                            <div class="agent-card-header">
                                <span class="agent-card-icon">📊</span>
                                <span class="agent-card-title">${
                                  agentData.title
                                }</span>
                                ${
                                  agentData.status
                                    ? `<span class="agent-card-status">${agentData.status}</span>`
                                    : ""
                                }
                            </div>
                            <div class="agent-card-content">
                                <ul class="detail-list">
                    `;

            for (const [key, value] of Object.entries(agentData.details)) {
              html += `
                            <li class="detail-item">
                                <span class="detail-label">${key}:</span>
                                <span class="detail-value">${value}</span>
                            </li>
                        `;
            }

            html += `
                                </ul>
                            </div>
                        </div>
                    `;
          }

          messageDiv.innerHTML = html;
        }

        chatMessages.appendChild(messageDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      function showTypingIndicator() {
        const chatMessages = document.getElementById("chatMessages");
        const indicator = document.createElement("div");
        indicator.id = "typingIndicator";
        indicator.className = "typing-indicator";
        indicator.innerHTML = `
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            `;
        chatMessages.appendChild(indicator);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      function hideTypingIndicator() {
        const indicator = document.getElementById("typingIndicator");
        if (indicator) {
          indicator.remove();
        }
      }

      function updateStatus(status, text) {
        const statusDot = document.getElementById("statusDot");
        const statusText = document.getElementById("statusText");

        statusDot.className = `status-dot ${status}`;
        statusText.textContent = text;
      }

      function completeDemo() {
        demoState.isPlaying = false;
        document.getElementById("startBtn").disabled = false;
        document.getElementById("pauseBtn").disabled = true;
        document.getElementById("skipBtn").disabled = true;

        updateStatus("idle", "Demo Complete");
      }
    </script>
  </body>
</html>
