<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Boot Simulation - Computing Through the Ages</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #000;
            color: #fff;
            overflow: hidden;
            height: 100vh;
        }

        .boot-container {
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        /* Hardware Shells */
        .crt-shell {
            width: 800px;
            height: 600px;
            background: linear-gradient(to bottom, #e0d5c7 0%, #c9baa8 100%);
            border-radius: 20px;
            padding: 40px 30px 60px 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.6);
            position: relative;
        }

        .crt-screen {
            width: 100%;
            height: 100%;
            background: #000;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }

        .screen-content {
            width: 100%;
            height: 100%;
            position: relative;
        }

        /* BIOS/POST Screen */
        .bios-screen {
            background: #000;
            color: #aaa;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            padding: 20px;
            line-height: 1.4;
        }

        .bios-header {
            color: #fff;
            margin-bottom: 20px;
        }

        .bios-line {
            opacity: 0;
            animation: fadeIn 0.1s forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        .cursor-blink {
            display: inline-block;
            width: 8px;
            height: 14px;
            background: #aaa;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        /* Windows 95 Boot */
        .win95-boot {
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .win95-logo {
            font-size: 48px;
            color: #fff;
            margin-bottom: 30px;
            font-family: 'Arial', sans-serif;
            font-weight: bold;
        }

        .win95-text {
            color: #fff;
            font-size: 20px;
            margin-bottom: 40px;
        }

        .loading-bar {
            width: 300px;
            height: 20px;
            border: 2px solid #808080;
            background: #000080;
            position: relative;
            overflow: hidden;
        }

        .loading-progress {
            height: 100%;
            background: repeating-linear-gradient(
                45deg,
                #0000ff,
                #0000ff 10px,
                #00008b 10px,
                #00008b 20px
            );
            animation: loading 2s linear infinite;
            width: 0%;
        }

        @keyframes loading {
            from { background-position: 0 0; }
            to { background-position: 40px 0; }
        }

        /* Windows 95 Desktop */
        .win95-desktop {
            background: #008080;
            width: 100%;
            height: 100%;
            position: relative;
        }

        .desktop-icons {
            padding: 10px;
        }

        .desktop-icon {
            width: 80px;
            text-align: center;
            margin-bottom: 15px;
            cursor: pointer;
            user-select: none;
        }

        .icon-image {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px;
            margin: 0 auto 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .icon-label {
            color: #fff;
            font-size: 11px;
            text-shadow: 1px 1px 2px #000;
        }

        .taskbar {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 28px;
            background: #c0c0c0;
            border-top: 2px solid #fff;
            display: flex;
            align-items: center;
            padding: 0 2px;
        }

        .start-button {
            background: #c0c0c0;
            border: 2px solid;
            border-color: #fff #000 #000 #fff;
            padding: 2px 20px;
            font-weight: bold;
            font-size: 13px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .start-button:active {
            border-color: #000 #fff #fff #000;
        }

        /* Browser Window */
        .browser-window {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            width: 90%;
            height: 85%;
            background: #fff;
            border: 2px solid;
            border-color: #fff #000 #000 #fff;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.5);
            display: none;
            flex-direction: column;
            animation: windowPop 0.3s forwards;
        }

        .browser-window.show {
            display: flex;
        }

        @keyframes windowPop {
            to { transform: translate(-50%, -50%) scale(1); }
        }

        .window-titlebar {
            background: linear-gradient(to right, #000080, #1084d0);
            color: #fff;
            padding: 3px 5px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 12px;
            font-weight: bold;
        }

        .window-buttons {
            display: flex;
            gap: 2px;
        }

        .window-btn {
            width: 16px;
            height: 14px;
            background: #c0c0c0;
            border: 1px solid;
            border-color: #fff #000 #000 #fff;
            font-size: 10px;
            text-align: center;
            line-height: 12px;
            color: #000;
            cursor: pointer;
        }

        .browser-toolbar {
            background: #f0f0f0;
            border-bottom: 1px solid #808080;
            padding: 4px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .toolbar-btn {
            background: #c0c0c0;
            border: 2px solid;
            border-color: #fff #000 #000 #fff;
            padding: 3px 10px;
            font-size: 11px;
            cursor: pointer;
        }

        .address-bar {
            flex: 1;
            background: #fff;
            border: 2px solid;
            border-color: #000 #fff #fff #000;
            padding: 3px 5px;
            font-size: 12px;
            font-family: 'Courier New', monospace;
        }

        .browser-content {
            flex: 1;
            background: #fff;
            position: relative;
            overflow: hidden;
        }

        .loading-page {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            height: 100%;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f0f0f0;
            border-top: 5px solid #0000ff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            margin-top: 20px;
            color: #666;
            font-size: 14px;
        }

        .page-iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Mac OS 9 Styles */
        .macos9-desktop {
            background: linear-gradient(135deg, #ccccff 0%, #9999cc 100%);
            width: 100%;
            height: 100%;
            position: relative;
        }

        .mac-menubar {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 20px;
            background: rgba(255,255,255,0.9);
            border-bottom: 1px solid #999;
            display: flex;
            align-items: center;
            padding: 0 5px;
            font-size: 12px;
            color: #000;
        }

        .apple-menu {
            font-size: 14px;
            margin-right: 10px;
            cursor: pointer;
        }

        .mac-dock {
            position: absolute;
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255,255,255,0.3);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            padding: 5px 10px;
            display: flex;
            gap: 5px;
            border: 1px solid rgba(255,255,255,0.5);
        }

        .dock-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .dock-icon:hover {
            transform: scale(1.2) translateY(-5px);
        }

        /* Windows 11 Desktop */
        .win11-desktop {
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="1920" height="1080"><rect fill="%23005a9e" width="1920" height="1080"/><circle fill="%23008cff" cx="960" cy="540" r="300" opacity="0.5"/></svg>');
            background-size: cover;
            width: 100%;
            height: 100%;
            position: relative;
        }

        .win11-taskbar {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(30, 30, 30, 0.7);
            backdrop-filter: blur(30px);
            height: 48px;
            border-radius: 8px 8px 0 0;
            display: flex;
            align-items: center;
            padding: 0 10px;
            gap: 5px;
        }

        .win11-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .win11-icon:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
        }

        /* Power Button */
        .power-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            cursor: pointer;
            box-shadow: 0 8px 32px rgba(0,0,0,0.5);
            transition: all 0.3s;
            z-index: 1000;
        }

        .power-button:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 40px rgba(102, 126, 234, 0.6);
        }

        .power-button.on {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            box-shadow: 0 8px 32px rgba(76, 175, 80, 0.6);
        }

        /* Era Selector */
        .era-selector {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 12px;
            border: 2px solid rgba(102, 126, 234, 0.5);
            z-index: 1000;
        }

        .era-selector h3 {
            margin-bottom: 15px;
            font-size: 14px;
            color: #667eea;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .era-btn {
            display: block;
            width: 100%;
            padding: 10px 15px;
            margin-bottom: 8px;
            background: #252525;
            border: 2px solid #333;
            color: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.2s;
            text-align: left;
        }

        .era-btn:hover {
            background: #333;
            border-color: #667eea;
        }

        .era-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: #764ba2;
        }

        /* Status Display */
        .status-display {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            border-radius: 12px;
            border: 2px solid rgba(102, 126, 234, 0.5);
            font-size: 14px;
            z-index: 1000;
        }

        .status-label {
            color: #999;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }

        .status-value {
            color: #667eea;
            font-weight: 600;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div class="era-selector">
        <h3>Select Era</h3>
        <button class="era-btn active" onclick="selectEra('win95')">
            üñ•Ô∏è 1999 - Windows 95
        </button>
        <button class="era-btn" onclick="selectEra('macos9')">
            üçé 2001 - Mac OS 9
        </button>
        <button class="era-btn" onclick="selectEra('winxp')">
            üíª 2005 - Windows XP
        </button>
        <button class="era-btn" onclick="selectEra('osx')">
            üçé 2007 - Mac OS X
        </button>
        <button class="era-btn" onclick="selectEra('win11')">
            üéÆ 2024 - Windows 11
        </button>
    </div>

    <div class="status-display">
        <div class="status-label">Boot State</div>
        <div class="status-value" id="bootState">OFF</div>
    </div>

    <div class="boot-container" id="bootContainer">
        <div class="crt-shell">
            <div class="crt-screen">
                <div class="screen-content" id="screenContent">
                    <!-- Boot sequence will be rendered here -->
                </div>
            </div>
        </div>
    </div>

    <div class="power-button" id="powerBtn" onclick="togglePower()">
        ‚ö°
    </div>

    <script>
        // Audio Context for sound generation
        let audioContext = null;

        // Audio generation functions
        function initAudio() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        function playBIOSBeep() {
            initAudio();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            oscillator.frequency.value = 800; // 800 Hz beep
            oscillator.type = 'sine';

            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);

            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.1);
        }

        function playMacStartupChime() {
            initAudio();
            // Classic Mac startup chord (multiple notes)
            const notes = [523.25, 659.25, 783.99]; // C5, E5, G5 (C major chord)

            notes.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.frequency.value = freq;
                oscillator.type = 'sine';

                gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1.5);

                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 1.5);
            });
        }

        function playWindowsStartup() {
            initAudio();
            // Windows startup melody (simplified)
            const melody = [
                { freq: 523.25, duration: 0.15 },  // C5
                { freq: 659.25, duration: 0.15 },  // E5
                { freq: 783.99, duration: 0.15 },  // G5
                { freq: 1046.50, duration: 0.4 }   // C6
            ];

            let time = audioContext.currentTime;
            melody.forEach(note => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.frequency.value = note.freq;
                oscillator.type = 'sine';

                gainNode.gain.setValueAtTime(0.15, time);
                gainNode.gain.exponentialRampToValueAtTime(0.01, time + note.duration);

                oscillator.start(time);
                oscillator.stop(time + note.duration);

                time += note.duration;
            });
        }

        function playClickSound() {
            initAudio();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            oscillator.frequency.value = 600;
            oscillator.type = 'sine';

            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.05);

            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.05);
        }

        const bootSequences = {
            win95: {
                name: 'Windows 95',
                hardware: 'Beige PC',
                browser: 'Netscape Navigator',
                app: 'demos/aim-1999.html',
                appName: 'AOL Instant Messenger'
            },
            macos9: {
                name: 'Mac OS 9',
                hardware: 'iMac G3',
                browser: 'Internet Explorer',
                app: 'demos/msn-2001.html',
                appName: 'MSN Messenger'
            },
            winxp: {
                name: 'Windows XP',
                hardware: 'HP Laptop',
                browser: 'Firefox',
                app: 'demos/myspace-2005.html',
                appName: 'MySpace'
            },
            osx: {
                name: 'Mac OS X',
                hardware: 'MacBook',
                browser: 'Safari',
                app: 'demos/facebook-2007.html',
                appName: 'Facebook'
            },
            win11: {
                name: 'Windows 11',
                hardware: 'Gaming PC',
                browser: 'Chrome',
                app: 'demos/discord-2024.html',
                appName: 'Discord'
            }
        };

        let currentEra = 'win95';
        let isPoweredOn = false;
        let bootState = 'off';

        function selectEra(era) {
            if (isPoweredOn) {
                alert('Please power off the computer first!');
                return;
            }

            playClickSound();
            currentEra = era;
            document.querySelectorAll('.era-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        function togglePower() {
            playClickSound();
            if (!isPoweredOn) {
                powerOn();
            } else {
                powerOff();
            }
        }

        async function powerOn() {
            isPoweredOn = true;
            document.getElementById('powerBtn').classList.add('on');
            updateStatus('POWER ON');

            const sequence = bootSequences[currentEra];

            // Stage 1: BIOS/POST
            await showBIOS();

            // Stage 2: OS Boot
            await bootOS();

            // Stage 3: Desktop
            await showDesktop();

            // Stage 4: Launch Browser
            await launchBrowser();

            // Stage 5: Load Page
            await loadPage(sequence.app);
        }

        function powerOff() {
            isPoweredOn = false;
            document.getElementById('powerBtn').classList.remove('on');
            document.getElementById('screenContent').innerHTML = '';
            updateStatus('OFF');
        }

        function updateStatus(state) {
            bootState = state;
            document.getElementById('bootState').textContent = state;
        }

        async function showBIOS() {
            updateStatus('POST/BIOS');
            const screen = document.getElementById('screenContent');

            if (currentEra.includes('mac')) {
                // Mac startup chime and logo
                playMacStartupChime();
                screen.innerHTML = `
                    <div style="background: #666; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; flex-direction: column;">
                        <div style="font-size: 80px; margin-bottom: 20px;">üçé</div>
                        <div style="width: 50px; height: 50px; border: 4px solid #fff; border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                    </div>
                `;
                await sleep(2000);
            } else {
                // PC BIOS beep
                playBIOSBeep();
                const biosHTML = `
                    <div class="bios-screen">
                        <div class="bios-header">
                            AMERICAN MEGATRENDS, INC.<br>
                            BIOS VERSION 1.00.15<br>
                        </div>
                        <div class="bios-line" style="animation-delay: 0.1s;">Detecting Primary Master... Hard Disk 4.3GB</div>
                        <div class="bios-line" style="animation-delay: 0.3s;">Detecting Primary Slave... CD-ROM</div>
                        <div class="bios-line" style="animation-delay: 0.5s;">Memory Test: 64MB OK</div>
                        <div class="bios-line" style="animation-delay: 0.8s;">Detecting Floppy Drive A:... 1.44MB</div>
                        <div class="bios-line" style="animation-delay: 1.2s;">.</div>
                        <div class="bios-line" style="animation-delay: 1.5s;">Press DEL to enter SETUP</div>
                        <div class="bios-line" style="animation-delay: 2.0s;">Booting from Hard Disk<span class="cursor-blink"></span></div>
                    </div>
                `;
                screen.innerHTML = biosHTML;
                await sleep(3000);
            }
        }

        async function bootOS() {
            updateStatus('BOOTING OS');
            const screen = document.getElementById('screenContent');

            if (currentEra === 'win95') {
                playWindowsStartup();
                screen.innerHTML = `
                    <div class="win95-boot">
                        <div class="win95-logo">Windows 95</div>
                        <div class="win95-text">Microsoft</div>
                        <div class="loading-bar">
                            <div class="loading-progress" style="animation: loading 2s linear infinite, expand 2s forwards;"></div>
                        </div>
                    </div>
                    <style>
                        @keyframes expand { to { width: 100%; } }
                    </style>
                `;
                await sleep(3000);
            } else if (currentEra === 'winxp') {
                playWindowsStartup();
                screen.innerHTML = `
                    <div style="background: #5a7fca; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; flex-direction: column;">
                        <div style="font-size: 48px; color: #fff; margin-bottom: 30px; font-weight: bold;">Windows XP</div>
                        <div style="width: 300px; height: 20px; background: #4169e1; border-radius: 10px; overflow: hidden;">
                            <div style="width: 100%; height: 100%; background: repeating-linear-gradient(90deg, #6495ed, #6495ed 30px, #4169e1 30px, #4169e1 60px); animation: slide 1.5s linear infinite;"></div>
                        </div>
                    </div>
                    <style>
                        @keyframes slide { to { transform: translateX(60px); } }
                    </style>
                `;
                await sleep(3000);
            } else if (currentEra === 'win11') {
                playWindowsStartup();
                screen.innerHTML = `
                    <div style="background: #000; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; flex-direction: column;">
                        <div style="width: 80px; height: 80px; border: 6px solid #0078d4; border-radius: 50%; border-top-color: transparent; animation: spin 1s linear infinite; margin-bottom: 30px;"></div>
                        <div style="color: #fff; font-size: 20px;">Windows 11</div>
                    </div>
                `;
                await sleep(2500);
            } else if (currentEra.includes('mac')) {
                // Already shown startup, just wait a bit more
                await sleep(1500);
            }
        }

        async function showDesktop() {
            updateStatus('LOADING DESKTOP');
            const screen = document.getElementById('screenContent');

            if (currentEra === 'win95' || currentEra === 'winxp') {
                screen.innerHTML = `
                    <div class="win95-desktop">
                        <div class="desktop-icons">
                            <div class="desktop-icon" onclick="launchBrowserFromIcon()">
                                <div class="icon-image">üåê</div>
                                <div class="icon-label">${bootSequences[currentEra].browser}</div>
                            </div>
                        </div>
                        <div class="taskbar">
                            <div class="start-button">
                                <span>‚äû</span> Start
                            </div>
                        </div>
                    </div>
                `;
            } else if (currentEra === 'win11') {
                screen.innerHTML = `
                    <div class="win11-desktop">
                        <div class="win11-taskbar">
                            <div class="win11-icon" onclick="launchBrowserFromIcon()">üåê</div>
                        </div>
                    </div>
                `;
            } else if (currentEra.includes('mac')) {
                screen.innerHTML = `
                    <div class="macos9-desktop">
                        <div class="mac-menubar">
                            <span class="apple-menu">üçé</span>
                            <span>File</span>&nbsp;&nbsp;
                            <span>Edit</span>&nbsp;&nbsp;
                            <span>View</span>
                        </div>
                        <div class="mac-dock">
                            <div class="dock-icon" onclick="launchBrowserFromIcon()">üåê</div>
                        </div>
                    </div>
                `;
            }

            await sleep(2000);
        }

        async function launchBrowser() {
            // Browser will be launched when user clicks icon
            updateStatus('READY');
        }

        function launchBrowserFromIcon() {
            if (bootState !== 'READY' && bootState !== 'BROWSER OPEN') return;

            playClickSound();
            updateStatus('LAUNCHING BROWSER');
            const desktop = document.querySelector('.win95-desktop, .win11-desktop, .macos9-desktop');
            if (!desktop) return;

            const browserWindow = document.createElement('div');
            browserWindow.className = 'browser-window show';
            browserWindow.innerHTML = `
                <div class="window-titlebar">
                    <span>${bootSequences[currentEra].browser}</span>
                    <div class="window-buttons">
                        <div class="window-btn">_</div>
                        <div class="window-btn">‚ñ°</div>
                        <div class="window-btn" onclick="closeBrowser()">√ó</div>
                    </div>
                </div>
                <div class="browser-toolbar">
                    <div class="toolbar-btn">Back</div>
                    <div class="toolbar-btn">Forward</div>
                    <div class="toolbar-btn">Refresh</div>
                    <div class="address-bar">${bootSequences[currentEra].appName}</div>
                    <div class="toolbar-btn">Go</div>
                </div>
                <div class="browser-content" id="browserContent">
                    <div class="loading-page">
                        <div class="loading-spinner"></div>
                        <div class="loading-text">Loading ${bootSequences[currentEra].appName}...</div>
                    </div>
                </div>
            `;

            desktop.appendChild(browserWindow);

            // Load the actual page after 2 seconds
            setTimeout(() => {
                loadPageContent();
            }, 2000);
        }

        function loadPageContent() {
            updateStatus('BROWSER OPEN');
            const browserContent = document.getElementById('browserContent');
            browserContent.innerHTML = `
                <iframe class="page-iframe" src="${bootSequences[currentEra].app}"></iframe>
            `;
        }

        async function loadPage(url) {
            // This is now handled by launchBrowserFromIcon
        }

        function closeBrowser() {
            const browserWindow = document.querySelector('.browser-window');
            if (browserWindow) {
                browserWindow.remove();
                updateStatus('READY');
            }
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
    </script>
</body>
</html>
